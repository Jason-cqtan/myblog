/*
Navicat MySQL Data Transfer

Source Server         : localhost__3306
Source Server Version : 50714
Source Host           : localhost:3306
Source Database       : blog

Target Server Type    : MYSQL
Target Server Version : 50714
File Encoding         : 65001

Date: 2017-08-18 15:00:05
*/

SET FOREIGN_KEY_CHECKS=0;

-- ----------------------------
-- Table structure for `article`
-- ----------------------------
DROP TABLE IF EXISTS `article`;
CREATE TABLE `article` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `module_id` int(10) unsigned NOT NULL,
  `module_name` char(255) NOT NULL,
  `user_id` int(10) unsigned NOT NULL,
  `monthy` char(7) NOT NULL COMMENT '文章发表于几年几月',
  `title` char(50) NOT NULL,
  `brief` char(255) DEFAULT NULL,
  `create_time` int(10) unsigned DEFAULT NULL,
  `update_time` int(10) unsigned DEFAULT NULL,
  `deleted` tinyint(1) unsigned DEFAULT '0' COMMENT '是否删除',
  `views` int(10) unsigned DEFAULT '1',
  `platform` char(255) DEFAULT NULL COMMENT '平台',
  `browserdesc` char(255) DEFAULT NULL,
  `is_sticktop` tinyint(1) unsigned DEFAULT '0',
  `ipaddress` char(255) DEFAULT NULL,
  `remark` char(255) DEFAULT NULL,
  `tag_ids` char(255) DEFAULT NULL,
  `tag_names` char(255) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=11 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of article
-- ----------------------------
INSERT INTO `article` VALUES ('2', '7', 'php', '1', '2017-08', 'ceshi', '', '1503024491', '1503024491', '0', '5', 'Windows 7', 'Chrome 60.0', '0', '重庆市电信', '', '2,5', 'curl,composer');
INSERT INTO `article` VALUES ('3', '3', 'html5', '1', '2017-08', 'title1', 'dsffsdfdsffsdfdsffsdfdsffsdfdsffsdfdsffsdfdsffsdfdsffsdfdsffsdfdsffsdfdsffsdfdsffsdf', '1503024569', '1503024569', '0', '5', 'Windows 7', 'Chrome 60.0', '0', '重庆市电信', 'remark', '25', '自标签');
INSERT INTO `article` VALUES ('4', '3', 'html5', '1', '2017-08', 'dfgdgd', 'sdfsdfsdfsdsdfsdfsdfsdsdfsdfsdfsdsdfsdfsdfsdsdfsdfsdfsdsdfsdfsdfsdsdfsdfsdfsdsdfsdfsdfsdsdfsdfsdfsds', '1503024590', '1503024590', '0', '4', 'Windows 7', 'Chrome 60.0', '0', '重庆市电信', 'dsfsdfs', '25', '自标签');
INSERT INTO `article` VALUES ('5', '3', 'html5', '1', '2017-08', 'sdfsdfsdf', 'sdfsdfsdfsdsdfsdfsdfsdsdfsdfsdfsdsdfsdfsdfsdsdfsdfsdfsdsdfsdfsdfsdsdfsdfsdfsdsdfsdfsdfsd', '1503024606', '1503024606', '0', '5', 'Windows 7', 'Chrome 60.0', '0', '重庆市电信', 'sdfsdf', '36', '新标签');
INSERT INTO `article` VALUES ('6', '3', 'html5', '1', '2017-08', 'dsfsdf', 'sdfsdfsdfsdfsdfsdfsdfsdfsdfsdfsdfsdfsdfsdfsdfsdfsdfsdf', '1503024622', '1503024622', '0', '3', 'Windows 7', 'Chrome 60.0', '0', '重庆市电信', 'sdfsdfsdf', '27', 'erbiaoqi');
INSERT INTO `article` VALUES ('7', '3', 'html5', '1', '2017-08', 'sdfsdfsd', 'sdfsdfsdfsdfsdfsdfsdfsdfsdfsdfsdfsdfsdfsdfsdfsdfsdfsdfsdfsdf', '1503024651', '1503024651', '0', '6', 'Windows 7', 'Chrome 60.0', '0', '重庆市电信', 'sdfsdfsdf df', '27,29', 'erbiaoqi,sdf');
INSERT INTO `article` VALUES ('8', '3', 'html5', '1', '2017-08', '士大夫收到', '反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发', '1503026135', '1503026135', '0', '9', 'Windows 7', 'Chrome 60.0', '0', '重庆市电信', '士大夫s', '25', '自标签');
INSERT INTO `article` VALUES ('9', '7', 'php', '1', '2017-08', 'sdfsd', '', '1503029689', '1503029689', '0', '25', 'Windows 7', 'Chrome 60.0', '0', '重庆市电信', 'sdf sd', '5', 'composer');
INSERT INTO `article` VALUES ('10', '3', 'html5', '1', '2017-08', '三个标签', '发送到发送到反倒是/**\r\n*通过模块获取文章列表\r\n*@param[type]$cate[description]\r\n*@return[type][description]\r\n*/\r\npublicf', '1503038941', '1503038941', '0', '13', 'Windows 7', 'Chrome 60.0', '0', '重庆市电信', '士大夫收到', '25,27,29', '自标签,erbiaoqi,sdf');

-- ----------------------------
-- Table structure for `article_has_modules`
-- ----------------------------
DROP TABLE IF EXISTS `article_has_modules`;
CREATE TABLE `article_has_modules` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `article_id` int(10) unsigned NOT NULL,
  `module_id` int(10) unsigned NOT NULL,
  `deleted` tinyint(1) unsigned NOT NULL DEFAULT '0' COMMENT '是否删除',
  PRIMARY KEY (`id`),
  KEY `module_id` (`module_id`)
) ENGINE=MyISAM AUTO_INCREMENT=11 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of article_has_modules
-- ----------------------------
INSERT INTO `article_has_modules` VALUES ('2', '2', '7', '0');
INSERT INTO `article_has_modules` VALUES ('3', '3', '3', '0');
INSERT INTO `article_has_modules` VALUES ('4', '4', '3', '0');
INSERT INTO `article_has_modules` VALUES ('5', '5', '3', '0');
INSERT INTO `article_has_modules` VALUES ('6', '6', '3', '0');
INSERT INTO `article_has_modules` VALUES ('7', '7', '3', '0');
INSERT INTO `article_has_modules` VALUES ('8', '8', '3', '0');
INSERT INTO `article_has_modules` VALUES ('9', '9', '7', '0');
INSERT INTO `article_has_modules` VALUES ('10', '10', '3', '0');

-- ----------------------------
-- Table structure for `article_has_tags`
-- ----------------------------
DROP TABLE IF EXISTS `article_has_tags`;
CREATE TABLE `article_has_tags` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `article_id` int(10) unsigned NOT NULL,
  `tag_id` int(10) unsigned NOT NULL,
  `deleted` tinyint(1) unsigned NOT NULL DEFAULT '0' COMMENT '是否删除',
  PRIMARY KEY (`id`),
  KEY `tag_id` (`tag_id`)
) ENGINE=MyISAM AUTO_INCREMENT=19 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of article_has_tags
-- ----------------------------
INSERT INTO `article_has_tags` VALUES ('8', '3', '25', '0');
INSERT INTO `article_has_tags` VALUES ('7', '2', '5', '0');
INSERT INTO `article_has_tags` VALUES ('6', '2', '2', '0');
INSERT INTO `article_has_tags` VALUES ('9', '4', '25', '0');
INSERT INTO `article_has_tags` VALUES ('10', '5', '36', '0');
INSERT INTO `article_has_tags` VALUES ('11', '6', '27', '0');
INSERT INTO `article_has_tags` VALUES ('12', '7', '27', '0');
INSERT INTO `article_has_tags` VALUES ('13', '7', '29', '0');
INSERT INTO `article_has_tags` VALUES ('14', '8', '25', '0');
INSERT INTO `article_has_tags` VALUES ('15', '9', '5', '0');
INSERT INTO `article_has_tags` VALUES ('16', '10', '25', '0');
INSERT INTO `article_has_tags` VALUES ('17', '10', '27', '0');
INSERT INTO `article_has_tags` VALUES ('18', '10', '29', '0');

-- ----------------------------
-- Table structure for `comments`
-- ----------------------------
DROP TABLE IF EXISTS `comments`;
CREATE TABLE `comments` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `content` varchar(400) NOT NULL,
  `article_id` int(10) unsigned DEFAULT NULL,
  `user_id` int(10) unsigned NOT NULL,
  `pid` int(10) unsigned NOT NULL DEFAULT '0',
  `agreenum` int(10) unsigned DEFAULT NULL,
  `disagreenum` int(10) unsigned DEFAULT NULL,
  `reportnum` int(10) unsigned DEFAULT NULL,
  `address` char(255) DEFAULT NULL,
  `os` char(255) DEFAULT NULL,
  `osdesc` char(255) DEFAULT NULL,
  `brower` char(255) DEFAULT NULL,
  `browerdesc` char(255) DEFAULT NULL,
  `create_time` int(10) unsigned NOT NULL,
  `deleted` tinyint(1) unsigned NOT NULL DEFAULT '0',
  `floor` int(10) unsigned NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of comments
-- ----------------------------

-- ----------------------------
-- Table structure for `contact`
-- ----------------------------
DROP TABLE IF EXISTS `contact`;
CREATE TABLE `contact` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `weixin` char(255) DEFAULT NULL,
  `wexinimg` char(255) DEFAULT NULL,
  `weibo` char(255) DEFAULT NULL,
  `weiboimg` char(255) DEFAULT NULL,
  `qq` char(18) DEFAULT NULL,
  `facebook` char(255) DEFAULT NULL,
  `githup` char(255) DEFAULT NULL,
  `website` char(255) DEFAULT NULL,
  `steam` char(255) DEFAULT NULL,
  `twitter` char(255) DEFAULT NULL,
  `changba` char(255) DEFAULT NULL,
  `quanminkege` char(255) DEFAULT NULL,
  `linkedin` char(255) DEFAULT NULL,
  `email` char(255) DEFAULT NULL,
  `tel` char(11) DEFAULT NULL,
  `user_id` int(10) unsigned NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of contact
-- ----------------------------

-- ----------------------------
-- Table structure for `content`
-- ----------------------------
DROP TABLE IF EXISTS `content`;
CREATE TABLE `content` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `content` longtext NOT NULL,
  `article_id` int(10) unsigned NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=11 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of content
-- ----------------------------
INSERT INTO `content` VALUES ('2', '<pre class=\"brush:php;toolbar:false\">&lt;?php&nbsp;defined(&#39;BASEPATH&#39;)&nbsp;OR&nbsp;exit(&#39;No&nbsp;direct&nbsp;script&nbsp;access&nbsp;allowed&#39;);/****/class&nbsp;User_model&nbsp;extends&nbsp;CI_Model{&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;查询某个人&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;&nbsp;[type]&nbsp;$data&nbsp;[description]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;[type]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[description]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;getOneUser($data)&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$username&nbsp;=&nbsp;$data[&#39;name&#39;];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pwd&nbsp;=&nbsp;$data[&#39;pwd&#39;];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$sql&nbsp;=&nbsp;&quot;SELECT&nbsp;*&nbsp;FROM&nbsp;user&nbsp;where&nbsp;name&nbsp;=&#39;{$username}&#39;&nbsp;and&nbsp;pwd=&#39;{$pwd}&#39;&nbsp;LIMIT&nbsp;&nbsp;1&quot;;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$query&nbsp;=&nbsp;$this-&gt;db-&gt;query($sql);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($query-&gt;result()){&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$query-&gt;row();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(object)[];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;更新最近登录时间&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;&nbsp;[type]&nbsp;$user_id&nbsp;[description]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;[type]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[description]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;loginTime($user_id)&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$now&nbsp;=&nbsp;time();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$sql&nbsp;=&nbsp;&quot;UPDATE&nbsp;user&nbsp;SET&nbsp;last_login_time&nbsp;=&nbsp;&#39;{$now}&#39;&nbsp;WHERE&nbsp;id&nbsp;=&nbsp;{$user_id}&quot;;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$query&nbsp;=&nbsp;$this-&gt;db-&gt;query($sql);&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;/**&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;获取用户权限列表&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;&nbsp;[type]&nbsp;$user_id&nbsp;[description]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;[type]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[description]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;getUserAuths($user_id)&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$params&nbsp;=&nbsp;array(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;action&#39;&nbsp;=&gt;&nbsp;&#39;获取用户权限列表&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;command&#39;&nbsp;=&gt;&nbsp;&#39;getPowerListByUserId&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;data&#39;&nbsp;=&gt;&nbsp;array(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;user_id&#39;&nbsp;=&gt;&nbsp;$user_id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$randname&nbsp;=&nbsp;random_string(&#39;alnum&#39;,6);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;load-&gt;library(&#39;webapi&#39;,$params,$randname);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$result&nbsp;=&nbsp;$this-&gt;$randname-&gt;request_interface();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$result;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;getMembers($data&nbsp;=&nbsp;[])&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$params&nbsp;=&nbsp;array(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;action&#39;&nbsp;=&gt;&nbsp;&#39;获取所有工作人员&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;command&#39;&nbsp;=&gt;&nbsp;&#39;getAllUser&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;data&#39;&nbsp;=&gt;&nbsp;array(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;page_index&#39;&nbsp;=&gt;&nbsp;isset($data[&#39;page_index&#39;])?$data[&#39;page_index&#39;]:&#39;1&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;page_size&#39;&nbsp;=&gt;&nbsp;isset($data[&#39;page_size&#39;])?$data[&#39;page_size&#39;]:&#39;100&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;name&#39;&nbsp;=&gt;&nbsp;isset($data[&#39;name&#39;])?$data[&#39;name&#39;]:&#39;&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;telphone&#39;&nbsp;=&gt;&nbsp;isset($data[&#39;telphone&#39;])?$data[&#39;telphone&#39;]:&#39;&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;birthday&#39;&nbsp;=&gt;&nbsp;isset($data[&#39;birthday&#39;])?$data[&#39;birthday&#39;]:&#39;&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;address&#39;&nbsp;=&gt;&nbsp;isset($data[&#39;address&#39;])?$data[&#39;address&#39;]:&#39;&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$randname&nbsp;=&nbsp;random_string(&#39;alnum&#39;,6);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;load-&gt;library(&#39;webapi&#39;,$params,$randname);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$result&nbsp;=&nbsp;$this-&gt;$randname-&gt;request_interface();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$result;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;addMember($data)&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$params&nbsp;=&nbsp;array(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;action&#39;&nbsp;=&gt;&nbsp;&#39;添加工作人员&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;command&#39;&nbsp;=&gt;&nbsp;&#39;CreateUser&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;data&#39;&nbsp;=&gt;&nbsp;array(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;user_login_code&#39;&nbsp;=&gt;&nbsp;$data[&#39;user_login_code&#39;],&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;user_login_pwd&#39;&nbsp;=&gt;&nbsp;$data[&#39;user_login_pwd&#39;],&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;name&#39;&nbsp;=&gt;&nbsp;$data[&#39;username&#39;],&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;sex&#39;&nbsp;=&gt;&nbsp;$data[&#39;sex&#39;],&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;birthday&#39;&nbsp;=&gt;&nbsp;$data[&#39;birthday&#39;],&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;headpic&#39;&nbsp;=&gt;&nbsp;$data[&#39;headpic&#39;],&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;idcard&#39;&nbsp;=&gt;&nbsp;$data[&#39;idcard&#39;],&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;address&#39;&nbsp;=&gt;&nbsp;$data[&#39;address&#39;],&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;telphone&#39;&nbsp;=&gt;&nbsp;$data[&#39;telphone&#39;],&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;postcode&#39;&nbsp;=&gt;&nbsp;$data[&#39;postcode&#39;],&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;remark&#39;&nbsp;=&gt;&nbsp;$data[&#39;remark&#39;],&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;place_id&#39;&nbsp;=&gt;&nbsp;isset($data[&#39;place_id&#39;])?$data[&#39;place_id&#39;]:&#39;&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;place_name&#39;&nbsp;=&gt;&nbsp;isset($data[&#39;place_name&#39;])?$data[&#39;place_name&#39;]:&#39;&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;rolelist&#39;&nbsp;=&gt;&nbsp;$data[&#39;rolelist&#39;],//权限数组&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;dept_id&#39;&nbsp;=&gt;&nbsp;$data[&#39;dept_id&#39;],//部门id&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;operate_userid&#39;&nbsp;=&gt;&nbsp;$_SESSION[&#39;user_id&#39;]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$randname&nbsp;=&nbsp;random_string(&#39;alnum&#39;,6);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;load-&gt;library(&#39;webapi&#39;,$params,$randname);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$result&nbsp;=&nbsp;$this-&gt;$randname-&gt;request_interface();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$result;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;updateMember($data)&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$params&nbsp;=&nbsp;array(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;action&#39;&nbsp;=&gt;&nbsp;&#39;更新工作人员信息&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;command&#39;&nbsp;=&gt;&nbsp;&#39;UpdateUser&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;data&#39;&nbsp;=&gt;&nbsp;array(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$data[&#39;id&#39;],&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;user_login_code&#39;&nbsp;=&gt;&nbsp;$data[&#39;user_login_code&#39;],&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;name&#39;&nbsp;=&gt;&nbsp;$data[&#39;name&#39;],&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;sex&#39;&nbsp;=&gt;&nbsp;isset($data[&#39;sex&#39;])?$data[&#39;sex&#39;]:&#39;男&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;birthday&#39;&nbsp;=&gt;&nbsp;$data[&#39;birthday&#39;],&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;headpic&#39;&nbsp;=&gt;&nbsp;isset($data[&#39;headpic&#39;])?$data[&#39;headpic&#39;]:&#39;public/adminLTE/dist/img/avatar6.jpg&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;idcard&#39;&nbsp;=&gt;&nbsp;isset($data[&#39;idcard&#39;])?$data[&#39;idcard&#39;]:&#39;&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;address&#39;&nbsp;=&gt;&nbsp;isset($data[&#39;address&#39;])?$data[&#39;address&#39;]:&#39;&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;telphone&#39;&nbsp;=&gt;&nbsp;isset($data[&#39;telphone&#39;])?$data[&#39;telphone&#39;]:&#39;&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;postcode&#39;&nbsp;=&gt;&nbsp;isset($data[&#39;postcode&#39;])?$data[&#39;postcode&#39;]:&#39;&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;remark&#39;&nbsp;=&gt;&nbsp;isset($data[&#39;remark&#39;])?$data[&#39;remark&#39;]:&#39;&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;place_id&#39;&nbsp;=&gt;&nbsp;isset($data[&#39;place_id&#39;])?$data[&#39;place_id&#39;]:&#39;&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;place_name&#39;&nbsp;=&gt;&nbsp;isset($data[&#39;place_name&#39;])?$data[&#39;place_name&#39;]:&#39;&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;rolelist&#39;&nbsp;=&gt;&nbsp;isset($data[&#39;rolelist&#39;])?$data[&#39;rolelist&#39;]:&#39;&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;operate_userid&#39;&nbsp;=&gt;&nbsp;$_SESSION[&#39;user_id&#39;],&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;dept_id&#39;&nbsp;=&gt;&nbsp;isset($data[&#39;dept_id&#39;])?$data[&#39;dept_id&#39;]:&#39;&#39;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$randname&nbsp;=&nbsp;random_string(&#39;alnum&#39;,6);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;load-&gt;library(&#39;webapi&#39;,$params,$randname);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$result&nbsp;=&nbsp;$this-&gt;$randname-&gt;request_interface();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$result;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;userInfo($userid)&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$params&nbsp;=&nbsp;array(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;action&#39;&nbsp;=&gt;&nbsp;&#39;获取工作人员详细信息&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;command&#39;&nbsp;=&gt;&nbsp;&#39;getUserInfoByUserId&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;data&#39;&nbsp;=&gt;&nbsp;array(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$userid&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$randname&nbsp;=&nbsp;random_string(&#39;alnum&#39;,6);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;load-&gt;library(&#39;webapi&#39;,$params,$randname);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$result&nbsp;=&nbsp;$this-&gt;$randname-&gt;request_interface();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$result;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;delUser($userid)&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$params&nbsp;=&nbsp;array(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;action&#39;&nbsp;=&gt;&nbsp;&#39;删除工作人员&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;command&#39;&nbsp;=&gt;&nbsp;&#39;DeleteUser&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;data&#39;&nbsp;=&gt;&nbsp;array(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$userid,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;operate_userid&#39;&nbsp;=&gt;&nbsp;$_SESSION[&#39;user_id&#39;]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$randname&nbsp;=&nbsp;random_string(&#39;alnum&#39;,6);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;load-&gt;library(&#39;webapi&#39;,$params,$randname);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$result&nbsp;=&nbsp;$this-&gt;$randname-&gt;request_interface();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$result;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;updatePhone($data)&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$params&nbsp;=&nbsp;array(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;action&#39;&nbsp;=&gt;&nbsp;&#39;修改手机号码&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;command&#39;&nbsp;=&gt;&nbsp;&#39;UpdateUserTelphone&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;data&#39;&nbsp;=&gt;&nbsp;array(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$data[&#39;id&#39;],&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;telphone&#39;&nbsp;=&gt;&nbsp;$data[&#39;telphone&#39;],&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;check_code&#39;&nbsp;=&gt;&nbsp;$data[&#39;checkcode&#39;],&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;operate_userid&#39;&nbsp;=&gt;&nbsp;$_SESSION[&#39;user_id&#39;]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$randname&nbsp;=&nbsp;random_string(&#39;alnum&#39;,6);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;load-&gt;library(&#39;webapi&#39;,$params,$randname);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$result&nbsp;=&nbsp;$this-&gt;$randname-&gt;request_interface();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$result;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;updatePassword($data)&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$params&nbsp;=&nbsp;array(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;action&#39;&nbsp;=&gt;&nbsp;&#39;修改用户密码&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;command&#39;&nbsp;=&gt;&nbsp;&#39;UpdateUserPWD&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;data&#39;&nbsp;=&gt;&nbsp;array(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;$data[&#39;id&#39;],&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;user_login_pwd&#39;&nbsp;=&gt;&nbsp;$data[&#39;password&#39;],&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;check_code&#39;&nbsp;=&gt;&nbsp;$data[&#39;checkcode&#39;],&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;operate_userid&#39;&nbsp;=&gt;&nbsp;isset($_SESSION[&#39;user_id&#39;])?$_SESSION[&#39;user_id&#39;]:$data[&#39;user_id&#39;]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$randname&nbsp;=&nbsp;random_string(&#39;alnum&#39;,6);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;load-&gt;library(&#39;webapi&#39;,$params,$randname);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$result&nbsp;=&nbsp;$this-&gt;$randname-&gt;request_interface();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$result;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;checkCode($data)&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$params&nbsp;=&nbsp;array(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;action&#39;&nbsp;=&gt;&nbsp;&#39;创建校验码&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;command&#39;&nbsp;=&gt;&nbsp;&#39;CreateCheckCode&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;data&#39;&nbsp;=&gt;&nbsp;array(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;user_id&#39;&nbsp;=&gt;&nbsp;$data[&#39;user_id&#39;],&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;telphone&#39;&nbsp;=&gt;&nbsp;$data[&#39;telphone&#39;],&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;belong_operation&#39;&nbsp;=&gt;&nbsp;$data[&#39;belong_operation&#39;]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$randname&nbsp;=&nbsp;random_string(&#39;alnum&#39;,6);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;load-&gt;library(&#39;webapi&#39;,$params,$randname);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$result&nbsp;=&nbsp;$this-&gt;$randname-&gt;request_interface();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$result;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;SendSMSMessage($data)&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$params&nbsp;=&nbsp;array(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;action&#39;&nbsp;=&gt;&nbsp;&#39;发送短信&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;command&#39;&nbsp;=&gt;&nbsp;&#39;SendSMSMessage&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;url&#39;&nbsp;=&gt;&nbsp;&#39;http://120.76.26.51:9009&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;data&#39;&nbsp;=&gt;&nbsp;array(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;account&#39;&nbsp;=&gt;&nbsp;isset($data[&#39;account&#39;])?$data[&#39;account&#39;]:&#39;test&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;passwordmd5&#39;&nbsp;=&gt;&nbsp;isset($data[&#39;passwordmd5&#39;])?$data[&#39;passwordmd5&#39;]:&#39;202cb962ac59075b964b07152d234b70&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;mobile&#39;&nbsp;=&gt;&nbsp;$data[&#39;mobile&#39;],&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;content&#39;&nbsp;=&gt;&nbsp;$data[&#39;content&#39;]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$randname&nbsp;=&nbsp;random_string(&#39;alnum&#39;,6);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;load-&gt;library(&#39;webapi&#39;,$params,$randname);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$result&nbsp;=&nbsp;$this-&gt;$randname-&gt;request_interface();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$result;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;UserInfoByTelephone($data)&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$params&nbsp;=&nbsp;array(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;action&#39;&nbsp;=&gt;&nbsp;&#39;根据用户电话号码获取用户信息&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;command&#39;&nbsp;=&gt;&nbsp;&#39;getUserInfoByTelephone&#39;,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;data&#39;&nbsp;=&gt;&nbsp;array(&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;telephone&#39;&nbsp;=&gt;&nbsp;$data[&#39;telephone&#39;]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$randname&nbsp;=&nbsp;random_string(&#39;alnum&#39;,6);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;load-&gt;library(&#39;webapi&#39;,$params,$randname);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$result&nbsp;=&nbsp;$this-&gt;$randname-&gt;request_interface();&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$result;&nbsp;&nbsp;&nbsp;&nbsp;}}</pre><p><br/></p>', '2');
INSERT INTO `content` VALUES ('3', '<p>dsffsdfdsffsdfdsffsdfdsffsdfdsffsdfdsffsdf</p><p>dsffsdf</p><p>dsffsdf</p><p>dsffsdf</p><p>dsffsdf</p><p>dsffsdf</p><p>dsffsdf</p>', '3');
INSERT INTO `content` VALUES ('4', '<p><br/></p><p>sdfsdfsdfsdsdfsdfsdfsd</p><p>sdfsdfsdfsd</p><p>sdfsdfsdfsd</p><p>sdfsdfsdfsd</p><p>sdfsdfsdfsd</p><p>sdfsdfsdfsd</p><p>sdfsdfsdfsd</p><p>sdfsdfsdfsd</p><p>sdfsdfsdfsd</p>', '4');
INSERT INTO `content` VALUES ('5', '<p>sdfsdfsdfsdsdfsdfsdfsdsdfsdfsdfsdsdfsdfsdfsdsdfsdfsdfsdsdfsdfsdfsdsdfsdfsdfsdsdfsdfsdfsd</p>', '5');
INSERT INTO `content` VALUES ('6', '<p>sdfsdfsdfsdfsdfsdfsdfsdfsdfsdfsdfsdfsdfsdf</p><p>sdfsdf</p><p>sdfsdf</p>', '6');
INSERT INTO `content` VALUES ('7', '<p>sdfsdfsdfsdfsdfsdfsdfsdfsdfsdfsdfsdfsdfsdfsdfsdf</p><p>sdfsdf</p><p>sdfsdf</p>', '7');
INSERT INTO `content` VALUES ('8', '<p>反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到反倒是发送到</p>', '8');
INSERT INTO `content` VALUES ('9', '<pre class=\"brush:php;toolbar:false\">&lt;?php\r\ndefined(&#39;BASEPATH&#39;)&nbsp;OR&nbsp;exit(&#39;No&nbsp;direct&nbsp;script&nbsp;access&nbsp;allowed&#39;);\r\n\r\nclass&nbsp;Home&nbsp;extends&nbsp;CI_Controller&nbsp;{\r\n\r\n	function&nbsp;__construct()\r\n	{\r\n		parent::__construct();\r\n		$this-&gt;load-&gt;model(&#39;Common_model&#39;,&#39;common&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;load-&gt;model(&quot;User_model&quot;,&#39;user&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;load-&gt;model(&#39;Article_model&#39;,&#39;article&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;load-&gt;model(&#39;Module_model&#39;,&#39;module&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;load-&gt;model(&#39;Tags_model&#39;,&#39;tag&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;load-&gt;model(&quot;Soul_model&quot;,&#39;soul&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;load-&gt;helper(&#39;bootpagination&#39;);\r\n	}\r\n&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;首页展示\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;[type]&nbsp;[description]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n	public&nbsp;function&nbsp;index()\r\n	{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//默认显示10条文章列表\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;page_size&#39;]&nbsp;=&nbsp;10;//每页显示几条\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;page_index&#39;]&nbsp;=&nbsp;(!empty($this-&gt;uri-&gt;segment(4)))?(int)$this-&gt;uri-&gt;segment(4):1;//当前第几页\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$res&nbsp;=&nbsp;$this-&gt;article-&gt;getArticles($data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;total_page&#39;]&nbsp;=&nbsp;$res[&#39;total_page&#39;];//总页数\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;totalnum&#39;]&nbsp;=&nbsp;$res[&#39;total_count&#39;];//总条数\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;pagestr&#39;]&nbsp;=&nbsp;bootpagination($data[&#39;page_index&#39;],$data[&#39;total_page&#39;],3);//分页\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;list&#39;]&nbsp;=&nbsp;$res[&#39;data&#39;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//热门文章\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;hots&#39;]&nbsp;=&nbsp;$this-&gt;article-&gt;getHots();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//随机文章\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;rands&#39;]&nbsp;=&nbsp;$this-&gt;article-&gt;getRandArticle();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//心灵鸡汤\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;soul&#39;]&nbsp;=&nbsp;$this-&gt;soul-&gt;getRand();\r\n		$this-&gt;load-&gt;view(&#39;home/index&#39;,$data);\r\n	}\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;所有文章ajax获取列表\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;[type]&nbsp;[description]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;ajaxGetArticles()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;page_index&#39;]&nbsp;=&nbsp;(int)$this-&gt;input-&gt;post(&#39;page_index&#39;)==0?1:(int)$this-&gt;input-&gt;post(&#39;page_index&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;page_size&#39;]&nbsp;=&nbsp;(int)$this-&gt;input-&gt;post(&#39;page_size&#39;);&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$res&nbsp;=&nbsp;$this-&gt;article-&gt;getArticles($data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//var_dump($res);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$totalnum&nbsp;=&nbsp;$res[&#39;total_count&#39;];//(int)$res-&gt;count;//总条数\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$total_page&nbsp;=&nbsp;$res[&#39;total_page&#39;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pagestr&nbsp;=&nbsp;bootpagination($data[&#39;page_index&#39;],$total_page,3);//分页\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$statistics&nbsp;=&nbsp;array(&#39;currentpage&#39;=&gt;$data[&#39;page_index&#39;],&#39;total_page&#39;=&gt;$total_page,&#39;totalnum&#39;=&gt;$totalnum);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ajaxcontent&nbsp;=&nbsp;$this-&gt;AjaxHtmlFormat($res[&#39;data&#39;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;json_encode(array(&#39;list&#39;=&gt;$ajaxcontent,&#39;pagestr&#39;=&gt;$pagestr,&#39;statistics&#39;=&gt;$statistics));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;表体html文件格式化，公共\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;array&nbsp;$data&nbsp;[description]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;function&nbsp;AjaxHtmlFormat($data&nbsp;=&nbsp;array())\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$str&nbsp;=&nbsp;&#39;&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($data){\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($data&nbsp;as&nbsp;$key&nbsp;=&gt;&nbsp;$item)&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$str&nbsp;.=&nbsp;&#39;&lt;div&nbsp;class=&quot;box&nbsp;box-solid&quot;&gt;&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$str&nbsp;.=&nbsp;&#39;&lt;div&nbsp;class=&quot;box-header&nbsp;with-border&quot;&gt;&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$str&nbsp;.=&nbsp;&#39;&lt;h3&nbsp;class=&quot;box-title&quot;&gt;&lt;a&nbsp;href=&quot;&#39;.site_url(&#39;home/moduleArticle/&#39;.$item-&gt;module_name).&#39;&quot;&gt;&#39;.$item-&gt;module_name.&#39;&lt;/a&gt;&lt;/h3&gt;&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$str&nbsp;.=&nbsp;&#39;&lt;/div&gt;&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$str&nbsp;.=&nbsp;&#39;&lt;div&nbsp;class=&quot;box-body&quot;&gt;&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$str&nbsp;.=&nbsp;&#39;&lt;h3&gt;&lt;a&nbsp;href=&quot;&#39;.site_url(&#39;info/index/&#39;.$item-&gt;id).&#39;&quot;&nbsp;class=&quot;title&quot;&gt;&#39;.$item-&gt;title.&#39;&lt;/a&gt;&lt;/h3&gt;&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$str&nbsp;.=&nbsp;&#39;&lt;h4&gt;&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if(strlen($item-&gt;tag_ids)&nbsp;&gt;&nbsp;1){\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$needarr&nbsp;=&nbsp;[];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tag_name&nbsp;=&nbsp;explode(&#39;,&#39;,$item-&gt;tag_names);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tag_id&nbsp;=&nbsp;explode(&#39;,&#39;,$item-&gt;tag_ids);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($tag_name&nbsp;as&nbsp;$key&nbsp;=&gt;&nbsp;$tag)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$needarr[]&nbsp;=&nbsp;(object)array(\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;id&#39;&nbsp;=&gt;&nbsp;&nbsp;$tag_id[$key],\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&#39;name&#39;&nbsp;=&gt;&nbsp;$tag\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foreach&nbsp;($needarr&nbsp;as&nbsp;$key&nbsp;=&gt;&nbsp;$tag)&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$str&nbsp;.=&nbsp;&#39;&nbsp;&nbsp;&lt;a&nbsp;type=&quot;button&quot;&nbsp;href=&quot;&#39;.site_url(&#39;home/tagArticle/&#39;.$tag-&gt;name).&#39;&quot;&nbsp;class=&quot;btn&nbsp;btn-xs&nbsp;bg-gray&quot;&gt;&#39;.$tag-&gt;name.&#39;&lt;/a&gt;&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$str&nbsp;.=&nbsp;&#39;&lt;span&gt;&lt;small&nbsp;class=&quot;text-gray&quot;&gt;&nbsp;&nbsp;&#39;.$item-&gt;remark.&#39;&lt;/small&gt;&lt;/span&gt;&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$str&nbsp;.=&nbsp;&#39;&lt;/h4&gt;&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$str&nbsp;.=&nbsp;&#39;&lt;p&nbsp;class=&quot;brief&quot;&gt;&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$str&nbsp;.=&nbsp;$item-&gt;brief;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$str&nbsp;.=&nbsp;&#39;&lt;/p&gt;&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$str&nbsp;.=&nbsp;&#39;&lt;p&gt;&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$str&nbsp;.=&nbsp;&#39;&lt;a&nbsp;type=&quot;button&quot;&nbsp;href=&quot;&#39;.site_url(&#39;info/index/&#39;.$item-&gt;id).&#39;&quot;&nbsp;class=&quot;btn&nbsp;btn-primary&nbsp;btn-sm&quot;&gt;查看详情&amp;gt;&amp;gt;&lt;/a&gt;&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$str&nbsp;.=&nbsp;&#39;&lt;/p&gt;&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$str&nbsp;.=&nbsp;&#39;&lt;/div&gt;&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$str&nbsp;.=&nbsp;&#39;&lt;div&nbsp;class=&quot;box-footer&quot;&gt;&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$str&nbsp;.=&nbsp;&#39;&lt;span&nbsp;data-toggle=&quot;tooltip&quot;&nbsp;title=&quot;&quot;&nbsp;data-original-title=&quot;&#39;.date(&quot;Y-m-d&nbsp;H:i&quot;,$item-&gt;create_time).&#39;&quot;&gt;&lt;i&nbsp;class=&quot;fa&nbsp;fa-calendar&quot;&gt;&lt;/i&gt;&nbsp;&#39;.$this-&gt;common-&gt;formatTime($item-&gt;create_time).&#39;&lt;/span&gt;&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$str&nbsp;.=&nbsp;&#39;&lt;span&gt;&lt;i&nbsp;class=&quot;fa&nbsp;fa-eye&quot;&gt;&lt;/i&gt;&nbsp;(&nbsp;&#39;.$item-&gt;views.&#39;&nbsp;)&lt;/span&gt;&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$str&nbsp;.=&nbsp;&#39;&lt;a&nbsp;href=&quot;#&quot;&gt;&lt;span&gt;&lt;i&nbsp;class=&quot;fa&nbsp;fa-comment&quot;&gt;&lt;/i&gt;&nbsp;(&nbsp;0&nbsp;)&lt;/span&gt;&lt;/a&gt;&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$str&nbsp;.=&nbsp;&#39;&lt;/div&gt;&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$str&nbsp;.=&nbsp;&#39;&lt;/div&gt;&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}else{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$str&nbsp;.=&nbsp;&#39;&lt;div&nbsp;class=&quot;alert&nbsp;alert-warning&nbsp;alert-dismissible&quot;&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;button&nbsp;type=&quot;button&quot;&nbsp;class=&quot;close&quot;&nbsp;data-dismiss=&quot;alert&quot;&nbsp;aria-hidden=&quot;true&quot;&gt;×&lt;/button&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;h4&gt;&lt;i&nbsp;class=&quot;icon&nbsp;fa&nbsp;fa-warning&quot;&gt;&lt;/i&gt;&nbsp;提示!&lt;/h4&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;该分类下暂无数据，查看其它的吧:&gt;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;&#39;;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;$str;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;获取随机文章\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;[type]&nbsp;[description]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;getRand()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$res&nbsp;=&nbsp;$this-&gt;article-&gt;getRandArticle();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;json_encode(array(&#39;list&#39;=&gt;$res));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;记录点击次数\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;[type]&nbsp;[description]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;getclicknum()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;json_encode(array(&#39;num&#39;=&gt;$_SESSION[&#39;randsoulnum&#39;],&#39;msg&#39;=&gt;&#39;鸡汤看这么多干嘛，撸代码去！&#39;));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;获取心灵鸡汤\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;[type]&nbsp;[description]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;getSoul()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$_SESSION[&#39;randsoulnum&#39;]&nbsp;=&nbsp;isset($_SESSION[&#39;randsoulnum&#39;])?$_SESSION[&#39;randsoulnum&#39;]+=1:1;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$res&nbsp;=&nbsp;$this-&gt;soul-&gt;getRand();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;json_encode(array(&#39;status&#39;=&gt;0,&#39;word&#39;=&gt;$res));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;按月统计\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;[type]&nbsp;[description]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;getStatisticsBymonth()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$res&nbsp;=&nbsp;$this-&gt;article-&gt;getMonthy();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;json_encode(array(&#39;list&#39;=&gt;$res));exit;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;标签统计\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;[type]&nbsp;[description]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;getStatisticsByTags()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$res&nbsp;=&nbsp;$this-&gt;article-&gt;getStatisticsTags();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;json_encode(array(&#39;list&#39;=&gt;$res));exit;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;简单统计\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;[type]&nbsp;[description]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;getSimpleStatistics()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$res&nbsp;=&nbsp;$this-&gt;article-&gt;getSimpleStatistics();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;json_encode($res);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;通过模块获取文章列表\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;&nbsp;[type]&nbsp;$cate&nbsp;[description]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;[type]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[description]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;moduleArticle($cate)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;page_index&#39;]&nbsp;=&nbsp;empty($this-&gt;uri-&gt;segment(4))?1:(int)$this-&gt;uri-&gt;segment(4);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($data[&#39;page_index&#39;]&nbsp;&lt;&nbsp;1){\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;page_index&#39;]&nbsp;=&nbsp;1;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;module_name&#39;]&nbsp;=&nbsp;$cate;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$res&nbsp;=&nbsp;$this-&gt;article-&gt;getArticles($data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_r($res);exit;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;total_page&#39;]&nbsp;=&nbsp;$res[&#39;total_page&#39;];//总页数\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;totalnum&#39;]&nbsp;=&nbsp;$res[&#39;total_count&#39;];//总条数\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;pagestr&#39;]&nbsp;=&nbsp;bootpagination($data[&#39;page_index&#39;],$data[&#39;total_page&#39;],3);//分页\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;list&#39;]&nbsp;=&nbsp;$res[&#39;data&#39;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//面包屑\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;crumbs&#39;]&nbsp;=&nbsp;$this-&gt;module-&gt;getCrumbsByModulename($cate);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//热门文章\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;hots&#39;]&nbsp;=&nbsp;$this-&gt;article-&gt;getHots();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//随机文章\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;rands&#39;]&nbsp;=&nbsp;$this-&gt;article-&gt;getRandArticle();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//心灵鸡汤\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;soul&#39;]&nbsp;=&nbsp;$this-&gt;soul-&gt;getRand();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;load-&gt;view(&#39;home/modulelist&#39;,$data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;通过模块ajax获取文章\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;[type]&nbsp;[description]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;ajaxGetModuleArticles()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;page_index&#39;]&nbsp;=&nbsp;(int)$this-&gt;input-&gt;post(&#39;page_index&#39;)==0?1:(int)$this-&gt;input-&gt;post(&#39;page_index&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;page_size&#39;]&nbsp;=&nbsp;(int)$this-&gt;input-&gt;post(&#39;page_size&#39;);&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;module_name&#39;]&nbsp;=&nbsp;$this-&gt;input-&gt;post(&#39;module_name&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$res&nbsp;=&nbsp;$this-&gt;article-&gt;getArticles($data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//var_dump($res);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$totalnum&nbsp;=&nbsp;$res[&#39;total_count&#39;];//(int)$res-&gt;count;//总条数\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$total_page&nbsp;=&nbsp;$res[&#39;total_page&#39;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pagestr&nbsp;=&nbsp;bootpagination($data[&#39;page_index&#39;],$total_page,3);//分页\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$statistics&nbsp;=&nbsp;array(&#39;currentpage&#39;=&gt;$data[&#39;page_index&#39;],&#39;total_page&#39;=&gt;$total_page,&#39;totalnum&#39;=&gt;$totalnum);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ajaxcontent&nbsp;=&nbsp;$this-&gt;AjaxHtmlFormat($res[&#39;data&#39;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;json_encode(array(&#39;list&#39;=&gt;$ajaxcontent,&#39;pagestr&#39;=&gt;$pagestr,&#39;statistics&#39;=&gt;$statistics));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;通过标签获取文章列表\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;&nbsp;[type]&nbsp;$cate&nbsp;[description]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;[type]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[description]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;tagArticle($tag)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tag&nbsp;=&nbsp;urldecode(trim($tag));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;page_index&#39;]&nbsp;=&nbsp;empty($this-&gt;uri-&gt;segment(4))?1:(int)$this-&gt;uri-&gt;segment(4);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($data[&#39;page_index&#39;]&nbsp;&lt;&nbsp;1){\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;page_index&#39;]&nbsp;=&nbsp;1;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//获取tag_ids\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tagid&nbsp;=&nbsp;(int)$this-&gt;tag-&gt;getTagidByName($tag)-&gt;id;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;tag_ids&#39;]&nbsp;=&nbsp;[$tagid];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$res&nbsp;=&nbsp;$this-&gt;article-&gt;getArticles($data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;total_page&#39;]&nbsp;=&nbsp;$res[&#39;total_page&#39;];//总页数\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;totalnum&#39;]&nbsp;=&nbsp;$res[&#39;total_count&#39;];//总条数\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;pagestr&#39;]&nbsp;=&nbsp;bootpagination($data[&#39;page_index&#39;],$data[&#39;total_page&#39;],3);//分页\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;list&#39;]&nbsp;=&nbsp;$res[&#39;data&#39;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//热门文章\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;hots&#39;]&nbsp;=&nbsp;$this-&gt;article-&gt;getHots();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//推荐文章\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$params[&#39;page_size&#39;]&nbsp;=&nbsp;5;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$params[&#39;module_ids&#39;]&nbsp;=&nbsp;[$this-&gt;tag-&gt;getModuleidByTagid($tagid)];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;recommend&#39;]&nbsp;=&nbsp;$this-&gt;article-&gt;getArticles($params)[&#39;data&#39;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//心灵鸡汤\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;soul&#39;]&nbsp;=&nbsp;$this-&gt;soul-&gt;getRand();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;tag_name&#39;]&nbsp;=&nbsp;$tag;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_r($data);exit;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;load-&gt;view(&#39;home/taglist&#39;,$data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;通过标签ajax获取文章\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;[type]&nbsp;[description]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;ajaxGetTagArticles()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;page_index&#39;]&nbsp;=&nbsp;(int)$this-&gt;input-&gt;post(&#39;page_index&#39;)==0?1:(int)$this-&gt;input-&gt;post(&#39;page_index&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;page_size&#39;]&nbsp;=&nbsp;(int)$this-&gt;input-&gt;post(&#39;page_size&#39;);&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;tag_ids&#39;]&nbsp;=&nbsp;$this-&gt;input-&gt;post(&#39;tag_ids&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$res&nbsp;=&nbsp;$this-&gt;article-&gt;getArticles($data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//var_dump($res);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$totalnum&nbsp;=&nbsp;$res[&#39;total_count&#39;];//(int)$res-&gt;count;//总条数\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$total_page&nbsp;=&nbsp;$res[&#39;total_page&#39;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pagestr&nbsp;=&nbsp;bootpagination($data[&#39;page_index&#39;],$total_page,3);//分页\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$statistics&nbsp;=&nbsp;array(&#39;currentpage&#39;=&gt;$data[&#39;page_index&#39;],&#39;total_page&#39;=&gt;$total_page,&#39;totalnum&#39;=&gt;$totalnum);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ajaxcontent&nbsp;=&nbsp;$this-&gt;AjaxHtmlFormat($res[&#39;data&#39;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;json_encode(array(&#39;list&#39;=&gt;$ajaxcontent,&#39;pagestr&#39;=&gt;$pagestr,&#39;statistics&#39;=&gt;$statistics));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;通过标签id获取获取推荐列表\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;[type]&nbsp;[description]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;ajaxGetRecommendByTagid()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$tagid&nbsp;=&nbsp;(int)$this-&gt;input-&gt;post(&#39;tag_ids&#39;)[0];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;page_index&#39;]&nbsp;=&nbsp;(int)$this-&gt;input-&gt;post(&#39;page_index&#39;)==0?1:(int)$this-&gt;input-&gt;post(&#39;page_index&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;page_size&#39;]&nbsp;=&nbsp;5;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;module_ids&#39;]&nbsp;=&nbsp;[$this-&gt;tag-&gt;getModuleidByTagid($tagid)];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$res&nbsp;=&nbsp;$this-&gt;article-&gt;getArticles($data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;json_encode(array(&#39;list&#39;=&gt;$res[&#39;data&#39;]));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;通过月份获取文章列表\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;&nbsp;[type]&nbsp;$monthly&nbsp;[description]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;[type]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[description]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;getMonththArticles($monthly)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$monthly&nbsp;=&nbsp;urldecode(trim($monthly));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;page_index&#39;]&nbsp;=&nbsp;empty($this-&gt;uri-&gt;segment(4))?1:(int)$this-&gt;uri-&gt;segment(4);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($data[&#39;page_index&#39;]&nbsp;&lt;&nbsp;1){\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;page_index&#39;]&nbsp;=&nbsp;1;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;monthly&#39;]&nbsp;=&nbsp;$monthly;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$res&nbsp;=&nbsp;$this-&gt;article-&gt;getArticles($data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_r($res);exit;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;total_page&#39;]&nbsp;=&nbsp;$res[&#39;total_page&#39;];//总页数\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;totalnum&#39;]&nbsp;=&nbsp;$res[&#39;total_count&#39;];//总条数\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;pagestr&#39;]&nbsp;=&nbsp;bootpagination($data[&#39;page_index&#39;],$data[&#39;total_page&#39;],3);//分页\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;list&#39;]&nbsp;=&nbsp;$res[&#39;data&#39;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//热门文章\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;hots&#39;]&nbsp;=&nbsp;$this-&gt;article-&gt;getHots();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//随机文章\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;rands&#39;]&nbsp;=&nbsp;$this-&gt;article-&gt;getRandArticle();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//心灵鸡汤\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;soul&#39;]&nbsp;=&nbsp;$this-&gt;soul-&gt;getRand();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_r($data);exit;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;load-&gt;view(&#39;home/monthlist&#39;,$data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;通过月份ajax获取文章列表\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;[type]&nbsp;[description]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;ajaxGetMonthArticles()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;page_index&#39;]&nbsp;=&nbsp;(int)$this-&gt;input-&gt;post(&#39;page_index&#39;)==0?1:(int)$this-&gt;input-&gt;post(&#39;page_index&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;page_size&#39;]&nbsp;=&nbsp;(int)$this-&gt;input-&gt;post(&#39;page_size&#39;);&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;monthly&#39;]&nbsp;=&nbsp;$this-&gt;input-&gt;post(&#39;monthly&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$res&nbsp;=&nbsp;$this-&gt;article-&gt;getArticles($data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//var_dump($res);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$totalnum&nbsp;=&nbsp;$res[&#39;total_count&#39;];//(int)$res-&gt;count;//总条数\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$total_page&nbsp;=&nbsp;$res[&#39;total_page&#39;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$pagestr&nbsp;=&nbsp;bootpagination($data[&#39;page_index&#39;],$total_page,3);//分页\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$statistics&nbsp;=&nbsp;array(&#39;currentpage&#39;=&gt;$data[&#39;page_index&#39;],&#39;total_page&#39;=&gt;$total_page,&#39;totalnum&#39;=&gt;$totalnum);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$ajaxcontent&nbsp;=&nbsp;$this-&gt;AjaxHtmlFormat($res[&#39;data&#39;]);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;echo&nbsp;json_encode(array(&#39;list&#39;=&gt;$ajaxcontent,&#39;pagestr&#39;=&gt;$pagestr,&#39;statistics&#39;=&gt;$statistics));\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exit;\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n&nbsp;&nbsp;&nbsp;&nbsp;\r\n&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;关于我\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;[type]&nbsp;[description]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;aboutme()\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;load-&gt;view(&#39;home/aboutme&#39;);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}\r\n\r\n\r\n\r\n\r\n}</pre><p><br/></p>', '9');
INSERT INTO `content` VALUES ('10', '<p>发送到发送到反倒是</p><pre class=\"brush:php;toolbar:false\">&nbsp;&nbsp;&nbsp;&nbsp;/**\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;通过模块获取文章列表\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;&nbsp;[type]&nbsp;$cate&nbsp;[description]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;[type]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[description]\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/\r\n&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;function&nbsp;moduleArticle($cate)\r\n&nbsp;&nbsp;&nbsp;&nbsp;{\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;page_index&#39;]&nbsp;=&nbsp;empty($this-&gt;uri-&gt;segment(3))?1:(int)$this-&gt;uri-&gt;segment(3);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if($data[&#39;page_index&#39;]&nbsp;&lt;&nbsp;1){\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;page_index&#39;]&nbsp;=&nbsp;1;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;module_name&#39;]&nbsp;=&nbsp;$cate;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$res&nbsp;=&nbsp;$this-&gt;article-&gt;getArticles($data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;print_r($res);exit;\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;total_page&#39;]&nbsp;=&nbsp;$res[&#39;total_page&#39;];//总页数\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;totalnum&#39;]&nbsp;=&nbsp;$res[&#39;total_count&#39;];//总条数\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;pagestr&#39;]&nbsp;=&nbsp;bootpagination($data[&#39;page_index&#39;],$data[&#39;total_page&#39;],3);//分页\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;list&#39;]&nbsp;=&nbsp;$res[&#39;data&#39;];\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//面包屑\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;crumbs&#39;]&nbsp;=&nbsp;$this-&gt;module-&gt;getCrumbsByModulename($cate);\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//热门文章\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;hots&#39;]&nbsp;=&nbsp;$this-&gt;article-&gt;getHots();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//随机文章\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;rands&#39;]&nbsp;=&nbsp;$this-&gt;article-&gt;getRandArticle();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//心灵鸡汤\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$data[&#39;soul&#39;]&nbsp;=&nbsp;$this-&gt;soul-&gt;getRand();\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$this-&gt;load-&gt;view(&#39;home/modulelist&#39;,$data);\r\n&nbsp;&nbsp;&nbsp;&nbsp;}</pre><p><br/></p>', '10');

-- ----------------------------
-- Table structure for `module`
-- ----------------------------
DROP TABLE IF EXISTS `module`;
CREATE TABLE `module` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` char(10) NOT NULL,
  `pid` int(10) unsigned NOT NULL DEFAULT '0',
  `deleted` tinyint(1) unsigned NOT NULL DEFAULT '0',
  `is_tag` tinyint(1) unsigned NOT NULL DEFAULT '0',
  `is_nav` tinyint(1) unsigned NOT NULL DEFAULT '1' COMMENT '用于区分是导航还是网站推荐',
  PRIMARY KEY (`id`),
  KEY `name` (`name`)
) ENGINE=MyISAM AUTO_INCREMENT=33 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of module
-- ----------------------------
INSERT INTO `module` VALUES ('24', '子模块', '22', '0', '0', '0');
INSERT INTO `module` VALUES ('2', '前端', '0', '0', '0', '1');
INSERT INTO `module` VALUES ('3', 'html5', '2', '0', '1', '0');
INSERT INTO `module` VALUES ('4', 'css3', '2', '0', '1', '0');
INSERT INTO `module` VALUES ('5', 'js', '2', '0', '1', '0');
INSERT INTO `module` VALUES ('6', '后端', '0', '0', '0', '1');
INSERT INTO `module` VALUES ('7', 'php', '6', '0', '1', '0');
INSERT INTO `module` VALUES ('8', 'java', '6', '0', '1', '0');
INSERT INTO `module` VALUES ('9', '移动端', '0', '0', '0', '1');
INSERT INTO `module` VALUES ('10', 'android', '9', '0', '1', '0');
INSERT INTO `module` VALUES ('11', 'ios', '9', '0', '1', '0');
INSERT INTO `module` VALUES ('12', '服务器/os', '0', '0', '0', '1');
INSERT INTO `module` VALUES ('13', 'linux', '12', '0', '1', '0');
INSERT INTO `module` VALUES ('14', 'apache', '12', '0', '1', '0');
INSERT INTO `module` VALUES ('15', 'nginx', '12', '0', '1', '0');
INSERT INTO `module` VALUES ('16', 'windows', '12', '0', '1', '0');
INSERT INTO `module` VALUES ('17', 'mac', '12', '0', '1', '0');
INSERT INTO `module` VALUES ('22', '123878', '0', '0', '0', '0');
INSERT INTO `module` VALUES ('23', '45689', '22', '1', '0', '0');
INSERT INTO `module` VALUES ('25', '建站工具', '0', '0', '0', '0');
INSERT INTO `module` VALUES ('26', '在线学习', '0', '0', '0', '0');
INSERT INTO `module` VALUES ('27', '国内', '26', '0', '0', '0');
INSERT INTO `module` VALUES ('28', '国外', '26', '0', '0', '0');
INSERT INTO `module` VALUES ('29', '生活娱乐', '0', '0', '0', '1');
INSERT INTO `module` VALUES ('30', '音乐', '29', '0', '1', '0');
INSERT INTO `module` VALUES ('31', '游戏', '29', '0', '1', '0');
INSERT INTO `module` VALUES ('32', '健身', '29', '0', '1', '0');

-- ----------------------------
-- Table structure for `monthly`
-- ----------------------------
DROP TABLE IF EXISTS `monthly`;
CREATE TABLE `monthly` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `month` char(7) NOT NULL,
  `num` int(10) unsigned NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of monthly
-- ----------------------------
INSERT INTO `monthly` VALUES ('1', '2017-08', '9');

-- ----------------------------
-- Table structure for `tags`
-- ----------------------------
DROP TABLE IF EXISTS `tags`;
CREATE TABLE `tags` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` char(10) NOT NULL,
  `module_id` int(10) unsigned NOT NULL,
  `deleted` tinyint(1) unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=38 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of tags
-- ----------------------------
INSERT INTO `tags` VALUES ('1', 'ajax', '5', '0');
INSERT INTO `tags` VALUES ('2', 'curl', '7', '0');
INSERT INTO `tags` VALUES ('3', 'vue', '5', '0');
INSERT INTO `tags` VALUES ('4', 'vim', '13', '0');
INSERT INTO `tags` VALUES ('5', 'composer', '7', '0');
INSERT INTO `tags` VALUES ('6', '定位', '4', '0');
INSERT INTO `tags` VALUES ('20', 'were', '4', '0');
INSERT INTO `tags` VALUES ('19', 'websokit', '7', '0');
INSERT INTO `tags` VALUES ('18', '动画', '4', '0');
INSERT INTO `tags` VALUES ('17', 'gd2', '7', '0');
INSERT INTO `tags` VALUES ('21', 'tag', '23', '1');
INSERT INTO `tags` VALUES ('22', 'tag2', '23', '1');
INSERT INTO `tags` VALUES ('23', '新标签2', '24', '0');
INSERT INTO `tags` VALUES ('24', 'fsdfsdfsdf', '4', '0');
INSERT INTO `tags` VALUES ('25', '自标签', '3', '0');
INSERT INTO `tags` VALUES ('26', 'sdfsdfsdf', '4', '0');
INSERT INTO `tags` VALUES ('27', 'erbiaoqi', '3', '0');
INSERT INTO `tags` VALUES ('28', 'jq', '5', '0');
INSERT INTO `tags` VALUES ('29', 'sdf', '3', '0');
INSERT INTO `tags` VALUES ('30', '123', '4', '0');
INSERT INTO `tags` VALUES ('36', '新标签', '3', '0');
INSERT INTO `tags` VALUES ('37', '另一个新标签', '3', '0');

-- ----------------------------
-- Table structure for `usedname`
-- ----------------------------
DROP TABLE IF EXISTS `usedname`;
CREATE TABLE `usedname` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` char(255) NOT NULL,
  `user_id` int(10) unsigned NOT NULL,
  `used_time` int(10) unsigned NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of usedname
-- ----------------------------

-- ----------------------------
-- Table structure for `user`
-- ----------------------------
DROP TABLE IF EXISTS `user`;
CREATE TABLE `user` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `uid` int(10) unsigned NOT NULL COMMENT '用户id',
  `type` tinyint(1) unsigned NOT NULL DEFAULT '1' COMMENT '类型 1：githup  2：新浪微博 3：weixin 4：qq',
  `name` char(32) NOT NULL,
  `avatar` char(255) DEFAULT '' COMMENT '头像',
  `openid` char(255) NOT NULL,
  `access_token` char(255) NOT NULL DEFAULT '' COMMENT 'access_token token',
  `pwd` char(32) NOT NULL,
  `level` tinyint(255) unsigned DEFAULT '0',
  `position` char(255) DEFAULT '' COMMENT '职位',
  `reg_time` int(10) unsigned DEFAULT NULL,
  `last_login_ip` char(16) DEFAULT NULL,
  `last_login_time` int(10) unsigned DEFAULT NULL,
  `login_times` int(6) unsigned DEFAULT NULL,
  `email` char(255) DEFAULT '',
  `is_admin` tinyint(1) unsigned DEFAULT '0' COMMENT '是否是管理员',
  `address` char(255) DEFAULT '' COMMENT '联系地址',
  `signature` char(255) DEFAULT '' COMMENT '个性签名',
  `gender` tinyint(1) unsigned DEFAULT '0' COMMENT '性别1男0女',
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of user
-- ----------------------------
INSERT INTO `user` VALUES ('1', '0', '1', 'tjc', null, '', '', '78354a342d40fc34f3ba825f26527f56', '1', null, null, null, '1503023595', null, null, '0', null, null, null);

-- ----------------------------
-- Table structure for `websites`
-- ----------------------------
DROP TABLE IF EXISTS `websites`;
CREATE TABLE `websites` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `name` char(255) NOT NULL,
  `url` char(255) NOT NULL,
  `remark` char(255) DEFAULT NULL,
  `module_name` char(255) NOT NULL,
  `module_id` int(10) unsigned NOT NULL,
  `create_time` int(10) unsigned NOT NULL,
  `deleted` tinyint(3) unsigned NOT NULL DEFAULT '0',
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=13 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of websites
-- ----------------------------
INSERT INTO `websites` VALUES ('1', '123', 'http', null, '', '22', '1501837864', '1');
INSERT INTO `websites` VALUES ('2', 'test2', 'http://www.93jc.pw4', null, '123878->子模块', '24', '1501838482', '1');
INSERT INTO `websites` VALUES ('3', 'reealy', 'http://www.93jc.pw', null, '123878->子模块', '24', '1501838551', '1');
INSERT INTO `websites` VALUES ('4', 'yes', '123', null, '123878->子模块', '24', '1501838672', '1');
INSERT INTO `websites` VALUES ('5', '百度', 'http://www.baidu.com', null, '123878->子模块', '24', '1501839008', '0');
INSERT INTO `websites` VALUES ('6', '摩客网', 'http://www.google.com', null, '123878->子模块', '24', '1501840168', '0');
INSERT INTO `websites` VALUES ('7', '网易云课堂', 'http://www.93jc.pw', null, '在线学习->国内', '27', '1501841833', '0');
INSERT INTO `websites` VALUES ('8', 'w3c', 'http://www.93jc.pw', null, '在线学习->国外', '28', '1501841849', '0');
INSERT INTO `websites` VALUES ('9', '122', '53153', 'sdfdsfsdf', '建站工具', '25', '1501848494', '1');
INSERT INTO `websites` VALUES ('10', '122', '53153', null, '建站工具', '25', '1501848689', '1');
INSERT INTO `websites` VALUES ('11', '121425', '62538', '+2+6', '建站工具', '25', '1501848717', '1');
INSERT INTO `websites` VALUES ('12', 'sdfsdf', 'sdfsdf', 'sdfsdf123', '在线学习->国内', '27', '1501938338', '1');

-- ----------------------------
-- Table structure for `words`
-- ----------------------------
DROP TABLE IF EXISTS `words`;
CREATE TABLE `words` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `content` char(255) NOT NULL,
  `deleted` tinyint(1) unsigned NOT NULL DEFAULT '0',
  `create_time` int(10) unsigned NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=4 DEFAULT CHARSET=utf8;

-- ----------------------------
-- Records of words
-- ----------------------------
INSERT INTO `words` VALUES ('1', 'dfdsf dsfds', '0', '1501938301');
INSERT INTO `words` VALUES ('2', 'sdfsdfsdfsdfsdfsdfsd', '0', '1501938304');
INSERT INTO `words` VALUES ('3', 'dsfsdfsdfsdfsdf1232', '0', '1501938309');
